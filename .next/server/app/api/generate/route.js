"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate/route";
exports.ids = ["app/api/generate/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_mathe_AIShortGenerator_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate/route.ts */ \"(rsc)/./app/api/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate/route\",\n        pathname: \"/api/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\mathe\\\\AIShortGenerator\\\\app\\\\api\\\\generate\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_mathe_AIShortGenerator_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtYXRoZSU1Q0FJU2hvcnRHZW5lcmF0b3IlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q21hdGhlJTVDQUlTaG9ydEdlbmVyYXRvciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0I7QUFDN0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdXRvZmlsbS1haS8/YjliNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxtYXRoZVxcXFxBSVNob3J0R2VuZXJhdG9yXFxcXGFwcFxcXFxhcGlcXFxcZ2VuZXJhdGVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dlbmVyYXRlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcbWF0aGVcXFxcQUlTaG9ydEdlbmVyYXRvclxcXFxhcHBcXFxcYXBpXFxcXGdlbmVyYXRlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate/route.ts":
/*!***********************************!*\
  !*** ./app/api/generate/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/app-router/server/auth.js\");\n/* harmony import */ var _lib_workflow_engine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/workflow/engine */ \"(rsc)/./lib/workflow/engine.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\n\n\n\nconst generateSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    idea: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(10).max(500)\n});\nasync function POST(request) {\n    try {\n        const { userId } = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.auth)();\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { idea } = generateSchema.parse(body);\n        // Create workflow engine\n        const engine = new _lib_workflow_engine__WEBPACK_IMPORTED_MODULE_1__.WorkflowEngine();\n        // Create project in database\n        const projectId = await engine.createProject(userId, idea);\n        // Start async film generation\n        // In production, you'd want to use a job queue like Bull or similar\n        // For now, we'll run it synchronously (not recommended for production)\n        setImmediate(async ()=>{\n            try {\n                await engine.generateFilm(projectId);\n            } catch (error) {\n                console.error(\"Background film generation failed:\", error);\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            projectId,\n            message: \"Film generation started! Check your dashboard for progress.\"\n        });\n    } catch (error) {\n        console.error(\"Generate API error:\", error);\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_4__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid input\",\n                details: error.errors\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF1RDtBQUNaO0FBQ1c7QUFDL0I7QUFFdkIsTUFBTUksaUJBQWlCRCx1Q0FBUSxDQUFDO0lBQzlCRyxNQUFNSCx1Q0FBUSxHQUFHSyxHQUFHLENBQUMsSUFBSUMsR0FBRyxDQUFDO0FBQy9CO0FBRU8sZUFBZUMsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUcsTUFBTVgsMERBQUlBO1FBRTdCLElBQUksQ0FBQ1csUUFBUTtZQUNYLE9BQU9aLHFEQUFZQSxDQUFDYSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWUsR0FDeEI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1DLE9BQU8sTUFBTUwsUUFBUUUsSUFBSTtRQUMvQixNQUFNLEVBQUVQLElBQUksRUFBRSxHQUFHRixlQUFlYSxLQUFLLENBQUNEO1FBRXRDLHlCQUF5QjtRQUN6QixNQUFNRSxTQUFTLElBQUloQixnRUFBY0E7UUFFakMsNkJBQTZCO1FBQzdCLE1BQU1pQixZQUFZLE1BQU1ELE9BQU9FLGFBQWEsQ0FBQ1IsUUFBUU47UUFFckQsOEJBQThCO1FBQzlCLG9FQUFvRTtRQUNwRSx1RUFBdUU7UUFDdkVlLGFBQWE7WUFDWCxJQUFJO2dCQUNGLE1BQU1ILE9BQU9JLFlBQVksQ0FBQ0g7WUFDNUIsRUFBRSxPQUFPTCxPQUFPO2dCQUNkUyxRQUFRVCxLQUFLLENBQUMsc0NBQXNDQTtZQUN0RDtRQUNGO1FBRUEsT0FBT2QscURBQVlBLENBQUNhLElBQUksQ0FBQztZQUN2QlcsU0FBUztZQUNUTDtZQUNBTSxTQUFTO1FBQ1g7SUFFRixFQUFFLE9BQU9YLE9BQU87UUFDZFMsUUFBUVQsS0FBSyxDQUFDLHVCQUF1QkE7UUFFckMsSUFBSUEsaUJBQWlCWCx5Q0FBVSxFQUFFO1lBQy9CLE9BQU9ILHFEQUFZQSxDQUFDYSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO2dCQUFpQmEsU0FBU2IsTUFBTWMsTUFBTTtZQUFDLEdBQ2hEO2dCQUFFYixRQUFRO1lBQUk7UUFFbEI7UUFFQSxPQUFPZixxREFBWUEsQ0FBQ2EsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQXdCLEdBQ2pDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXV0b2ZpbG0tYWkvLi9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzP2I1OWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSAnQGNsZXJrL25leHRqcy9zZXJ2ZXInXHJcbmltcG9ydCB7IFdvcmtmbG93RW5naW5lIH0gZnJvbSAnQC9saWIvd29ya2Zsb3cvZW5naW5lJ1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xyXG5cclxuY29uc3QgZ2VuZXJhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgaWRlYTogei5zdHJpbmcoKS5taW4oMTApLm1heCg1MDApLFxyXG59KVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IGF3YWl0IGF1dGgoKVxyXG5cclxuICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCB7IGlkZWEgfSA9IGdlbmVyYXRlU2NoZW1hLnBhcnNlKGJvZHkpXHJcblxyXG4gICAgLy8gQ3JlYXRlIHdvcmtmbG93IGVuZ2luZVxyXG4gICAgY29uc3QgZW5naW5lID0gbmV3IFdvcmtmbG93RW5naW5lKClcclxuXHJcbiAgICAvLyBDcmVhdGUgcHJvamVjdCBpbiBkYXRhYmFzZVxyXG4gICAgY29uc3QgcHJvamVjdElkID0gYXdhaXQgZW5naW5lLmNyZWF0ZVByb2plY3QodXNlcklkLCBpZGVhKVxyXG5cclxuICAgIC8vIFN0YXJ0IGFzeW5jIGZpbG0gZ2VuZXJhdGlvblxyXG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgeW91J2Qgd2FudCB0byB1c2UgYSBqb2IgcXVldWUgbGlrZSBCdWxsIG9yIHNpbWlsYXJcclxuICAgIC8vIEZvciBub3csIHdlJ2xsIHJ1biBpdCBzeW5jaHJvbm91c2x5IChub3QgcmVjb21tZW5kZWQgZm9yIHByb2R1Y3Rpb24pXHJcbiAgICBzZXRJbW1lZGlhdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGVuZ2luZS5nZW5lcmF0ZUZpbG0ocHJvamVjdElkKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JhY2tncm91bmQgZmlsbSBnZW5lcmF0aW9uIGZhaWxlZDonLCBlcnJvcilcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBwcm9qZWN0SWQsXHJcbiAgICAgIG1lc3NhZ2U6ICdGaWxtIGdlbmVyYXRpb24gc3RhcnRlZCEgQ2hlY2sgeW91ciBkYXNoYm9hcmQgZm9yIHByb2dyZXNzLidcclxuICAgIH0pXHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdHZW5lcmF0ZSBBUEkgZXJyb3I6JywgZXJyb3IpXHJcblxyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgaW5wdXQnLCBkZXRhaWxzOiBlcnJvci5lcnJvcnMgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhdXRoIiwiV29ya2Zsb3dFbmdpbmUiLCJ6IiwiZ2VuZXJhdGVTY2hlbWEiLCJvYmplY3QiLCJpZGVhIiwic3RyaW5nIiwibWluIiwibWF4IiwiUE9TVCIsInJlcXVlc3QiLCJ1c2VySWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJib2R5IiwicGFyc2UiLCJlbmdpbmUiLCJwcm9qZWN0SWQiLCJjcmVhdGVQcm9qZWN0Iiwic2V0SW1tZWRpYXRlIiwiZ2VuZXJhdGVGaWxtIiwiY29uc29sZSIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiWm9kRXJyb3IiLCJkZXRhaWxzIiwiZXJyb3JzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://nyeejwnnsnxtjtcwgnjr.supabase.co\" || 0;\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55ZWVqd25uc254dGp0Y3dnbmpyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3MzcwOTYsImV4cCI6MjA3NzMxMzA5Nn0.P6DoXpKxxbI8Sd2R5D4b7ozlBtPPUI33F7c4mYsmnP8\" || 0;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcsY0FBY0gsa05BQXlDLElBQUk7QUFFMUQsTUFBTUssV0FBV1AsbUVBQVlBLENBQUNDLGFBQWFJLGFBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdXRvZmlsbS1haS8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL2R1bW15LnN1cGFiYXNlLmNvJ1xyXG5jb25zdCBzdXBhYmFzZUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8ICdkdW1teV9rZXknXHJcblxyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/workflow/engine.ts":
/*!********************************!*\
  !*** ./lib/workflow/engine.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorkflowEngine: () => (/* binding */ WorkflowEngine)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\nclass WorkflowEngine {\n    constructor(){\n        this.openai = new openai__WEBPACK_IMPORTED_MODULE_1__.OpenAI({\n            apiKey: process.env.OPENAI_API_KEY,\n            baseURL: process.env.OPENAI_BASE_URL || \"https://openrouter.ai/api/v1\"\n        });\n        this.json2VideoApiKey = process.env.JSON2VIDEO_API_KEY;\n        this.json2VideoUrl = process.env.JSON2VIDEO_API_URL || \"https://api.json2video.com\";\n    }\n    async generateFilm(projectId) {\n        try {\n            // Get project details\n            const { data: project, error: projectError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"projects\").select(\"*\").eq(\"id\", projectId).single();\n            if (projectError || !project) {\n                throw new Error(\"Project not found\");\n            }\n            // Check if user has enough credits\n            await this.checkUserCredits(project.user_id);\n            // Update status to generating\n            await this.updateProjectStatus(projectId, \"generating\", 10);\n            // Step 1: Generate scenes from idea\n            const scenes = await this.generateScenes(project.idea);\n            await this.updateProjectStatus(projectId, \"generating\", 30);\n            // Step 2: Generate videos for each scene\n            const videoUrls = await this.generateSceneVideos(scenes);\n            await this.updateProjectStatus(projectId, \"generating\", 70);\n            // Step 3: Combine videos into final film\n            const finalVideoUrl = await this.combineVideos(videoUrls);\n            await this.updateProjectStatus(projectId, \"rendering\", 90);\n            // Step 4: Upload to Supabase Storage\n            const publicUrl = await this.uploadToStorage(finalVideoUrl, projectId);\n            // Deduct credits from user\n            await this.deductUserCredits(project.user_id);\n            // Step 5: Mark as completed\n            await this.updateProjectStatus(projectId, \"completed\", 100, publicUrl);\n        } catch (error) {\n            console.error(\"Film generation failed:\", error);\n            const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n            await this.updateProjectStatus(projectId, \"failed\", 0, undefined, errorMessage);\n            throw error;\n        }\n    }\n    async generateScenes(idea) {\n        const prompt = `\r\nYou are a professional screenwriter. Create a compelling 3-scene short film script from this idea: \"${idea}\"\r\n\r\nReturn a JSON array of scenes with this exact format:\r\n[\r\n  {\r\n    \"id\": \"scene_1\",\r\n    \"description\": \"Brief scene description\",\r\n    \"dialogue\": \"Character dialogue if any\",\r\n    \"visual_prompt\": \"Detailed visual description for AI video generation\",\r\n    \"duration\": 5\r\n  }\r\n]\r\n\r\nGuidelines:\r\n- Exactly 3 scenes\r\n- Each scene 4-6 seconds long\r\n- Visual prompts should be cinematic and detailed\r\n- Keep dialogue minimal and impactful\r\n- Build a clear narrative arc\r\n`;\n        const response = await this.openai.chat.completions.create({\n            model: \"openai/gpt-oss-20b\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.7\n        });\n        const content = response.choices[0]?.message?.content;\n        if (!content) {\n            throw new Error(\"Failed to generate scenes from OpenAI\");\n        }\n        try {\n            return JSON.parse(content);\n        } catch  {\n            throw new Error(\"Invalid JSON response from OpenAI\");\n        }\n    }\n    async generateSceneVideos(scenes) {\n        // TODO: Implement Pika API integration\n        // For now, return placeholder URLs\n        const videoUrls = [];\n        for (const scene of scenes){\n            // Call Pika API with scene.visual_prompt\n            // const videoUrl = await pikaApi.generateVideo(scene.visual_prompt)\n            const videoUrl = `https://placeholder.com/video-${scene.id}.mp4`;\n            videoUrls.push(videoUrl);\n        }\n        return videoUrls;\n    }\n    async combineVideos(videoUrls) {\n        // Create Json2Video specification to combine scene videos\n        const json2VideoSpec = {\n            resolution: \"1080p\",\n            quality: \"high\",\n            scenes: videoUrls.map((videoUrl, index)=>({\n                    id: `scene_${index + 1}`,\n                    type: \"video\",\n                    src: videoUrl,\n                    duration: 5,\n                    transition: index > 0 ? {\n                        type: \"fade\",\n                        duration: 0.5\n                    } : undefined\n                })),\n            output: {\n                format: \"mp4\",\n                resolution: \"1920x1080\",\n                quality: \"high\"\n            }\n        };\n        try {\n            const response = await fetch(`${this.json2VideoUrl}/v2/projects`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${this.json2VideoApiKey}`\n                },\n                body: JSON.stringify(json2VideoSpec)\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                throw new Error(`Json2Video API error: ${response.status} - ${errorText}`);\n            }\n            const result = await response.json();\n            const renderId = result.id;\n            // Poll for completion\n            const finalVideoUrl = await this.pollJson2VideoRender(renderId);\n            return finalVideoUrl;\n        } catch (error) {\n            console.error(\"Json2Video API error:\", error);\n            throw new Error(`Failed to combine videos: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    async pollJson2VideoRender(renderId) {\n        const maxAttempts = 60 // 5 minutes with 5 second intervals\n        ;\n        const pollInterval = 5000 // 5 seconds\n        ;\n        for(let attempt = 0; attempt < maxAttempts; attempt++){\n            try {\n                const response = await fetch(`${this.json2VideoUrl}/v2/projects/${renderId}`, {\n                    headers: {\n                        \"Authorization\": `Bearer ${this.json2VideoApiKey}`\n                    }\n                });\n                if (!response.ok) {\n                    throw new Error(`Poll failed: ${response.status}`);\n                }\n                const result = await response.json();\n                if (result.status === \"completed\" && result.output_url) {\n                    return result.output_url;\n                } else if (result.status === \"failed\") {\n                    throw new Error(`Render failed: ${result.error || \"Unknown error\"}`);\n                }\n                // Still processing, wait and try again\n                await new Promise((resolve)=>setTimeout(resolve, pollInterval));\n            } catch (error) {\n                console.error(`Poll attempt ${attempt + 1} failed:`, error);\n                if (attempt === maxAttempts - 1) {\n                    throw error;\n                }\n            }\n        }\n        throw new Error(\"Render timeout: Video combination took too long\");\n    }\n    async checkUserCredits(userId) {\n        const { data: userCredits, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"user_credits\").select(\"credits\").eq(\"user_id\", userId).single();\n        if (error) {\n            // If user doesn't have credits record, create one with default credits\n            await this.createUserCredits(userId);\n            return;\n        }\n        if (!userCredits || userCredits.credits < 1) {\n            throw new Error(\"Insufficient credits. Please purchase more credits to generate films.\");\n        }\n    }\n    async deductUserCredits(userId) {\n        // First get current credits\n        const { data: currentCredits, error: fetchError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"user_credits\").select(\"credits\").eq(\"user_id\", userId).single();\n        if (fetchError || !currentCredits) {\n            console.error(\"Failed to fetch current credits:\", fetchError);\n            return;\n        }\n        // Then update with decremented value\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"user_credits\").update({\n            credits: currentCredits.credits - 1,\n            updated_at: new Date().toISOString()\n        }).eq(\"user_id\", userId);\n        if (error) {\n            console.error(\"Failed to deduct credits:\", error);\n        // Don't throw here as the film was successfully generated\n        }\n    }\n    async createUserCredits(userId) {\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"user_credits\").insert({\n            user_id: userId,\n            credits: 3\n        });\n        if (error) {\n            console.error(\"Failed to create user credits:\", error);\n        }\n    }\n    async uploadToStorage(videoUrl, projectId) {\n        try {\n            // Download the video from Json2Video\n            const videoResponse = await fetch(videoUrl);\n            if (!videoResponse.ok) {\n                throw new Error(`Failed to download video: ${videoResponse.status}`);\n            }\n            const videoBuffer = await videoResponse.arrayBuffer();\n            const videoBlob = new Blob([\n                videoBuffer\n            ], {\n                type: \"video/mp4\"\n            });\n            // Create a unique filename\n            const fileName = `films/${projectId}/final-film.mp4`;\n            // Upload to Supabase Storage\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"videos\").upload(fileName, videoBlob, {\n                contentType: \"video/mp4\",\n                upsert: true\n            });\n            if (error) {\n                throw new Error(`Failed to upload video to storage: ${error.message}`);\n            }\n            // Get public URL\n            const { data: { publicUrl } } = _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"videos\").getPublicUrl(fileName);\n            return publicUrl;\n        } catch (error) {\n            console.error(\"Storage upload error:\", error);\n            throw new Error(`Failed to upload video: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    async updateProjectStatus(projectId, status, progress, videoUrl, errorLog) {\n        const updateData = {\n            status,\n            progress,\n            updated_at: new Date().toISOString()\n        };\n        if (videoUrl) updateData.video_url = videoUrl;\n        if (errorLog) updateData.error_log = errorLog;\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"projects\").update(updateData).eq(\"id\", projectId);\n        if (error) {\n            console.error(\"Failed to update project status:\", error);\n        }\n    }\n    async createProject(userId, idea) {\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"projects\").insert({\n            user_id: userId,\n            idea,\n            status: \"pending\",\n            progress: 0\n        }).select(\"id\").single();\n        if (error) {\n            throw new Error(`Failed to create project: ${error.message}`);\n        }\n        return data.id;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBb0NBO1FBQ3BEO0lBQ0Y7SUFFQSxNQUFNbUcsY0FBYzNCLE1BQWMsRUFBRTVELElBQVksRUFBbUI7UUFDakUsTUFBTSxFQUFFZCxJQUFJLEVBQUVFLEtBQUssRUFBRSxHQUFHLE1BQU1uQixtREFBUUEsQ0FDbkNxQixJQUFJLENBQUMsWUFDTGdGLE1BQU0sQ0FBQztZQUNOMUUsU0FBU2dFO1lBQ1Q1RDtZQUNBZ0QsUUFBUTtZQUNSa0MsVUFBVTtRQUNaLEdBQ0MzRixNQUFNLENBQUMsTUFDUEUsTUFBTTtRQUVULElBQUlMLE9BQU87WUFDVCxNQUFNLElBQUlNLE1BQU0sQ0FBQywwQkFBMEIsRUFBRU4sTUFBTXNCLE9BQU8sQ0FBQyxDQUFDO1FBQzlEO1FBRUEsT0FBT3hCLEtBQUt5QyxFQUFFO0lBQ2hCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdXRvZmlsbS1haS8uL2xpYi93b3JrZmxvdy9lbmdpbmUudHM/MTI3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJ1xyXG5pbXBvcnQgeyBPcGVuQUkgfSBmcm9tICdvcGVuYWknXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZpbG1Qcm9qZWN0IHtcclxuICBpZDogc3RyaW5nXHJcbiAgdXNlcl9pZDogc3RyaW5nXHJcbiAgaWRlYTogc3RyaW5nXHJcbiAgc3RhdHVzOiAncGVuZGluZycgfCAnZ2VuZXJhdGluZycgfCAncmVuZGVyaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCdcclxuICBwcm9ncmVzczogbnVtYmVyXHJcbiAgdmlkZW9fdXJsPzogc3RyaW5nXHJcbiAgZXJyb3JfbG9nPzogc3RyaW5nXHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nXHJcbiAgdXBkYXRlZF9hdDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NlbmUge1xyXG4gIGlkOiBzdHJpbmdcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nXHJcbiAgZGlhbG9ndWU/OiBzdHJpbmdcclxuICB2aXN1YWxfcHJvbXB0OiBzdHJpbmdcclxuICBkdXJhdGlvbjogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JrZmxvd0VuZ2luZSB7XHJcbiAgcHJpdmF0ZSBvcGVuYWk6IE9wZW5BSVxyXG4gIHByaXZhdGUganNvbjJWaWRlb0FwaUtleTogc3RyaW5nXHJcbiAgcHJpdmF0ZSBqc29uMlZpZGVvVXJsOiBzdHJpbmdcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm9wZW5haSA9IG5ldyBPcGVuQUkoe1xyXG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxyXG4gICAgICBiYXNlVVJMOiBwcm9jZXNzLmVudi5PUEVOQUlfQkFTRV9VUkwgfHwgXCJodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxXCIsXHJcbiAgICB9KVxyXG4gICAgdGhpcy5qc29uMlZpZGVvQXBpS2V5ID0gcHJvY2Vzcy5lbnYuSlNPTjJWSURFT19BUElfS0VZIVxyXG4gICAgdGhpcy5qc29uMlZpZGVvVXJsID0gcHJvY2Vzcy5lbnYuSlNPTjJWSURFT19BUElfVVJMIHx8ICdodHRwczovL2FwaS5qc29uMnZpZGVvLmNvbSdcclxuICB9XHJcblxyXG4gIGFzeW5jIGdlbmVyYXRlRmlsbShwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2V0IHByb2plY3QgZGV0YWlsc1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHByb2plY3QsIGVycm9yOiBwcm9qZWN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2plY3RzJylcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAuZXEoJ2lkJywgcHJvamVjdElkKVxyXG4gICAgICAgIC5zaW5nbGUoKVxyXG5cclxuICAgICAgaWYgKHByb2plY3RFcnJvciB8fCAhcHJvamVjdCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvamVjdCBub3QgZm91bmQnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBlbm91Z2ggY3JlZGl0c1xyXG4gICAgICBhd2FpdCB0aGlzLmNoZWNrVXNlckNyZWRpdHMocHJvamVjdC51c2VyX2lkKVxyXG5cclxuICAgICAgLy8gVXBkYXRlIHN0YXR1cyB0byBnZW5lcmF0aW5nXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUHJvamVjdFN0YXR1cyhwcm9qZWN0SWQsICdnZW5lcmF0aW5nJywgMTApXHJcblxyXG4gICAgICAvLyBTdGVwIDE6IEdlbmVyYXRlIHNjZW5lcyBmcm9tIGlkZWFcclxuICAgICAgY29uc3Qgc2NlbmVzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVNjZW5lcyhwcm9qZWN0LmlkZWEpXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUHJvamVjdFN0YXR1cyhwcm9qZWN0SWQsICdnZW5lcmF0aW5nJywgMzApXHJcblxyXG4gICAgICAvLyBTdGVwIDI6IEdlbmVyYXRlIHZpZGVvcyBmb3IgZWFjaCBzY2VuZVxyXG4gICAgICBjb25zdCB2aWRlb1VybHMgPSBhd2FpdCB0aGlzLmdlbmVyYXRlU2NlbmVWaWRlb3Moc2NlbmVzKVxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVByb2plY3RTdGF0dXMocHJvamVjdElkLCAnZ2VuZXJhdGluZycsIDcwKVxyXG5cclxuICAgICAgLy8gU3RlcCAzOiBDb21iaW5lIHZpZGVvcyBpbnRvIGZpbmFsIGZpbG1cclxuICAgICAgY29uc3QgZmluYWxWaWRlb1VybCA9IGF3YWl0IHRoaXMuY29tYmluZVZpZGVvcyh2aWRlb1VybHMpXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUHJvamVjdFN0YXR1cyhwcm9qZWN0SWQsICdyZW5kZXJpbmcnLCA5MClcclxuXHJcbiAgICAgIC8vIFN0ZXAgNDogVXBsb2FkIHRvIFN1cGFiYXNlIFN0b3JhZ2VcclxuICAgICAgY29uc3QgcHVibGljVXJsID0gYXdhaXQgdGhpcy51cGxvYWRUb1N0b3JhZ2UoZmluYWxWaWRlb1VybCwgcHJvamVjdElkKVxyXG5cclxuICAgICAgLy8gRGVkdWN0IGNyZWRpdHMgZnJvbSB1c2VyXHJcbiAgICAgIGF3YWl0IHRoaXMuZGVkdWN0VXNlckNyZWRpdHMocHJvamVjdC51c2VyX2lkKVxyXG5cclxuICAgICAgLy8gU3RlcCA1OiBNYXJrIGFzIGNvbXBsZXRlZFxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVByb2plY3RTdGF0dXMocHJvamVjdElkLCAnY29tcGxldGVkJywgMTAwLCBwdWJsaWNVcmwpXHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmlsbSBnZW5lcmF0aW9uIGZhaWxlZDonLCBlcnJvcilcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQcm9qZWN0U3RhdHVzKHByb2plY3RJZCwgJ2ZhaWxlZCcsIDAsIHVuZGVmaW5lZCwgZXJyb3JNZXNzYWdlKVxyXG4gICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVNjZW5lcyhpZGVhOiBzdHJpbmcpOiBQcm9taXNlPFNjZW5lW10+IHtcclxuICAgIGNvbnN0IHByb21wdCA9IGBcclxuWW91IGFyZSBhIHByb2Zlc3Npb25hbCBzY3JlZW53cml0ZXIuIENyZWF0ZSBhIGNvbXBlbGxpbmcgMy1zY2VuZSBzaG9ydCBmaWxtIHNjcmlwdCBmcm9tIHRoaXMgaWRlYTogXCIke2lkZWF9XCJcclxuXHJcblJldHVybiBhIEpTT04gYXJyYXkgb2Ygc2NlbmVzIHdpdGggdGhpcyBleGFjdCBmb3JtYXQ6XHJcbltcclxuICB7XHJcbiAgICBcImlkXCI6IFwic2NlbmVfMVwiLFxyXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIkJyaWVmIHNjZW5lIGRlc2NyaXB0aW9uXCIsXHJcbiAgICBcImRpYWxvZ3VlXCI6IFwiQ2hhcmFjdGVyIGRpYWxvZ3VlIGlmIGFueVwiLFxyXG4gICAgXCJ2aXN1YWxfcHJvbXB0XCI6IFwiRGV0YWlsZWQgdmlzdWFsIGRlc2NyaXB0aW9uIGZvciBBSSB2aWRlbyBnZW5lcmF0aW9uXCIsXHJcbiAgICBcImR1cmF0aW9uXCI6IDVcclxuICB9XHJcbl1cclxuXHJcbkd1aWRlbGluZXM6XHJcbi0gRXhhY3RseSAzIHNjZW5lc1xyXG4tIEVhY2ggc2NlbmUgNC02IHNlY29uZHMgbG9uZ1xyXG4tIFZpc3VhbCBwcm9tcHRzIHNob3VsZCBiZSBjaW5lbWF0aWMgYW5kIGRldGFpbGVkXHJcbi0gS2VlcCBkaWFsb2d1ZSBtaW5pbWFsIGFuZCBpbXBhY3RmdWxcclxuLSBCdWlsZCBhIGNsZWFyIG5hcnJhdGl2ZSBhcmNcclxuYFxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5vcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICBtb2RlbDogJ29wZW5haS9ncHQtb3NzLTIwYicsXHJcbiAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9XSxcclxuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnRcclxuICAgIGlmICghY29udGVudCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSBzY2VuZXMgZnJvbSBPcGVuQUknKVxyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGNvbnRlbnQpXHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEpTT04gcmVzcG9uc2UgZnJvbSBPcGVuQUknKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVNjZW5lVmlkZW9zKHNjZW5lczogU2NlbmVbXSk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgIC8vIFRPRE86IEltcGxlbWVudCBQaWthIEFQSSBpbnRlZ3JhdGlvblxyXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIHBsYWNlaG9sZGVyIFVSTHNcclxuICAgIGNvbnN0IHZpZGVvVXJsczogc3RyaW5nW10gPSBbXVxyXG5cclxuICAgIGZvciAoY29uc3Qgc2NlbmUgb2Ygc2NlbmVzKSB7XHJcbiAgICAgIC8vIENhbGwgUGlrYSBBUEkgd2l0aCBzY2VuZS52aXN1YWxfcHJvbXB0XHJcbiAgICAgIC8vIGNvbnN0IHZpZGVvVXJsID0gYXdhaXQgcGlrYUFwaS5nZW5lcmF0ZVZpZGVvKHNjZW5lLnZpc3VhbF9wcm9tcHQpXHJcbiAgICAgIGNvbnN0IHZpZGVvVXJsID0gYGh0dHBzOi8vcGxhY2Vob2xkZXIuY29tL3ZpZGVvLSR7c2NlbmUuaWR9Lm1wNGBcclxuICAgICAgdmlkZW9VcmxzLnB1c2godmlkZW9VcmwpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZpZGVvVXJsc1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjb21iaW5lVmlkZW9zKHZpZGVvVXJsczogc3RyaW5nW10pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgLy8gQ3JlYXRlIEpzb24yVmlkZW8gc3BlY2lmaWNhdGlvbiB0byBjb21iaW5lIHNjZW5lIHZpZGVvc1xyXG4gICAgY29uc3QganNvbjJWaWRlb1NwZWMgPSB7XHJcbiAgICAgIHJlc29sdXRpb246IFwiMTA4MHBcIixcclxuICAgICAgcXVhbGl0eTogXCJoaWdoXCIsXHJcbiAgICAgIHNjZW5lczogdmlkZW9VcmxzLm1hcCgodmlkZW9VcmwsIGluZGV4KSA9PiAoe1xyXG4gICAgICAgIGlkOiBgc2NlbmVfJHtpbmRleCArIDF9YCxcclxuICAgICAgICB0eXBlOiBcInZpZGVvXCIsXHJcbiAgICAgICAgc3JjOiB2aWRlb1VybCxcclxuICAgICAgICBkdXJhdGlvbjogNSwgLy8gRWFjaCBzY2VuZSBpcyA1IHNlY29uZHNcclxuICAgICAgICB0cmFuc2l0aW9uOiBpbmRleCA+IDAgPyB7XHJcbiAgICAgICAgICB0eXBlOiBcImZhZGVcIixcclxuICAgICAgICAgIGR1cmF0aW9uOiAwLjVcclxuICAgICAgICB9IDogdW5kZWZpbmVkXHJcbiAgICAgIH0pKSxcclxuICAgICAgb3V0cHV0OiB7XHJcbiAgICAgICAgZm9ybWF0OiBcIm1wNFwiLFxyXG4gICAgICAgIHJlc29sdXRpb246IFwiMTkyMHgxMDgwXCIsXHJcbiAgICAgICAgcXVhbGl0eTogXCJoaWdoXCJcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5qc29uMlZpZGVvVXJsfS92Mi9wcm9qZWN0c2AsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5qc29uMlZpZGVvQXBpS2V5fWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShqc29uMlZpZGVvU3BlYyksXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBKc29uMlZpZGVvIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YClcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgIGNvbnN0IHJlbmRlcklkID0gcmVzdWx0LmlkXHJcblxyXG4gICAgICAvLyBQb2xsIGZvciBjb21wbGV0aW9uXHJcbiAgICAgIGNvbnN0IGZpbmFsVmlkZW9VcmwgPSBhd2FpdCB0aGlzLnBvbGxKc29uMlZpZGVvUmVuZGVyKHJlbmRlcklkKVxyXG4gICAgICByZXR1cm4gZmluYWxWaWRlb1VybFxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0pzb24yVmlkZW8gQVBJIGVycm9yOicsIGVycm9yKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjb21iaW5lIHZpZGVvczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBwb2xsSnNvbjJWaWRlb1JlbmRlcihyZW5kZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IG1heEF0dGVtcHRzID0gNjAgLy8gNSBtaW51dGVzIHdpdGggNSBzZWNvbmQgaW50ZXJ2YWxzXHJcbiAgICBjb25zdCBwb2xsSW50ZXJ2YWwgPSA1MDAwIC8vIDUgc2Vjb25kc1xyXG5cclxuICAgIGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgbWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5qc29uMlZpZGVvVXJsfS92Mi9wcm9qZWN0cy8ke3JlbmRlcklkfWAsIHtcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5qc29uMlZpZGVvQXBpS2V5fWAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUG9sbCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIHJlc3VsdC5vdXRwdXRfdXJsKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0Lm91dHB1dF91cmxcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdmYWlsZWQnKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlbmRlciBmYWlsZWQ6ICR7cmVzdWx0LmVycm9yIHx8ICdVbmtub3duIGVycm9yJ31gKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RpbGwgcHJvY2Vzc2luZywgd2FpdCBhbmQgdHJ5IGFnYWluXHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHBvbGxJbnRlcnZhbCkpXHJcblxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFBvbGwgYXR0ZW1wdCAke2F0dGVtcHQgKyAxfSBmYWlsZWQ6YCwgZXJyb3IpXHJcbiAgICAgICAgaWYgKGF0dGVtcHQgPT09IG1heEF0dGVtcHRzIC0gMSkge1xyXG4gICAgICAgICAgdGhyb3cgZXJyb3JcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbmRlciB0aW1lb3V0OiBWaWRlbyBjb21iaW5hdGlvbiB0b29rIHRvbyBsb25nJylcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tVc2VyQ3JlZGl0cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgeyBkYXRhOiB1c2VyQ3JlZGl0cywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd1c2VyX2NyZWRpdHMnKVxyXG4gICAgICAuc2VsZWN0KCdjcmVkaXRzJylcclxuICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxyXG4gICAgICAuc2luZ2xlKClcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgLy8gSWYgdXNlciBkb2Vzbid0IGhhdmUgY3JlZGl0cyByZWNvcmQsIGNyZWF0ZSBvbmUgd2l0aCBkZWZhdWx0IGNyZWRpdHNcclxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVVc2VyQ3JlZGl0cyh1c2VySWQpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdXNlckNyZWRpdHMgfHwgdXNlckNyZWRpdHMuY3JlZGl0cyA8IDEpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnN1ZmZpY2llbnQgY3JlZGl0cy4gUGxlYXNlIHB1cmNoYXNlIG1vcmUgY3JlZGl0cyB0byBnZW5lcmF0ZSBmaWxtcy4nKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBkZWR1Y3RVc2VyQ3JlZGl0cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgLy8gRmlyc3QgZ2V0IGN1cnJlbnQgY3JlZGl0c1xyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50Q3JlZGl0cywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd1c2VyX2NyZWRpdHMnKVxyXG4gICAgICAuc2VsZWN0KCdjcmVkaXRzJylcclxuICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxyXG4gICAgICAuc2luZ2xlKClcclxuXHJcbiAgICBpZiAoZmV0Y2hFcnJvciB8fCAhY3VycmVudENyZWRpdHMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGN1cnJlbnQgY3JlZGl0czonLCBmZXRjaEVycm9yKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGVuIHVwZGF0ZSB3aXRoIGRlY3JlbWVudGVkIHZhbHVlXHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndXNlcl9jcmVkaXRzJylcclxuICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgY3JlZGl0czogY3VycmVudENyZWRpdHMuY3JlZGl0cyAtIDEsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGRlZHVjdCBjcmVkaXRzOicsIGVycm9yKVxyXG4gICAgICAvLyBEb24ndCB0aHJvdyBoZXJlIGFzIHRoZSBmaWxtIHdhcyBzdWNjZXNzZnVsbHkgZ2VuZXJhdGVkXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVVzZXJDcmVkaXRzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndXNlcl9jcmVkaXRzJylcclxuICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgIGNyZWRpdHM6IDMsIC8vIERlZmF1bHQgZnJlZSBjcmVkaXRzXHJcbiAgICAgIH0pXHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgdXNlciBjcmVkaXRzOicsIGVycm9yKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyB1cGxvYWRUb1N0b3JhZ2UodmlkZW9Vcmw6IHN0cmluZywgcHJvamVjdElkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gRG93bmxvYWQgdGhlIHZpZGVvIGZyb20gSnNvbjJWaWRlb1xyXG4gICAgICBjb25zdCB2aWRlb1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2godmlkZW9VcmwpXHJcbiAgICAgIGlmICghdmlkZW9SZXNwb25zZS5vaykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRvd25sb2FkIHZpZGVvOiAke3ZpZGVvUmVzcG9uc2Uuc3RhdHVzfWApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHZpZGVvQnVmZmVyID0gYXdhaXQgdmlkZW9SZXNwb25zZS5hcnJheUJ1ZmZlcigpXHJcbiAgICAgIGNvbnN0IHZpZGVvQmxvYiA9IG5ldyBCbG9iKFt2aWRlb0J1ZmZlcl0sIHsgdHlwZTogJ3ZpZGVvL21wNCcgfSlcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhIHVuaXF1ZSBmaWxlbmFtZVxyXG4gICAgICBjb25zdCBmaWxlTmFtZSA9IGBmaWxtcy8ke3Byb2plY3RJZH0vZmluYWwtZmlsbS5tcDRgXHJcblxyXG4gICAgICAvLyBVcGxvYWQgdG8gU3VwYWJhc2UgU3RvcmFnZVxyXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlXHJcbiAgICAgICAgLmZyb20oJ3ZpZGVvcycpXHJcbiAgICAgICAgLnVwbG9hZChmaWxlTmFtZSwgdmlkZW9CbG9iLCB7XHJcbiAgICAgICAgICBjb250ZW50VHlwZTogJ3ZpZGVvL21wNCcsXHJcbiAgICAgICAgICB1cHNlcnQ6IHRydWVcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBsb2FkIHZpZGVvIHRvIHN0b3JhZ2U6ICR7ZXJyb3IubWVzc2FnZX1gKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgcHVibGljIFVSTFxyXG4gICAgICBjb25zdCB7IGRhdGE6IHsgcHVibGljVXJsIH0gfSA9IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgICAuZnJvbSgndmlkZW9zJylcclxuICAgICAgICAuZ2V0UHVibGljVXJsKGZpbGVOYW1lKVxyXG5cclxuICAgICAgcmV0dXJuIHB1YmxpY1VybFxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0b3JhZ2UgdXBsb2FkIGVycm9yOicsIGVycm9yKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGxvYWQgdmlkZW86ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlUHJvamVjdFN0YXR1cyhcclxuICAgIHByb2plY3RJZDogc3RyaW5nLFxyXG4gICAgc3RhdHVzOiBGaWxtUHJvamVjdFsnc3RhdHVzJ10sXHJcbiAgICBwcm9ncmVzczogbnVtYmVyLFxyXG4gICAgdmlkZW9Vcmw/OiBzdHJpbmcsXHJcbiAgICBlcnJvckxvZz86IHN0cmluZ1xyXG4gICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgdXBkYXRlRGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XHJcbiAgICAgIHN0YXR1cyxcclxuICAgICAgcHJvZ3Jlc3MsXHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmlkZW9VcmwpIHVwZGF0ZURhdGEudmlkZW9fdXJsID0gdmlkZW9VcmxcclxuICAgIGlmIChlcnJvckxvZykgdXBkYXRlRGF0YS5lcnJvcl9sb2cgPSBlcnJvckxvZ1xyXG5cclxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9qZWN0cycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlRGF0YSlcclxuICAgICAgLmVxKCdpZCcsIHByb2plY3RJZClcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBwcm9qZWN0IHN0YXR1czonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZVByb2plY3QodXNlcklkOiBzdHJpbmcsIGlkZWE6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvamVjdHMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgaWRlYSxcclxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICBwcm9ncmVzczogMCxcclxuICAgICAgfSlcclxuICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAuc2luZ2xlKClcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIHByb2plY3Q6ICR7ZXJyb3IubWVzc2FnZX1gKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhLmlkXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsIk9wZW5BSSIsIldvcmtmbG93RW5naW5lIiwiY29uc3RydWN0b3IiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJiYXNlVVJMIiwiT1BFTkFJX0JBU0VfVVJMIiwianNvbjJWaWRlb0FwaUtleSIsIkpTT04yVklERU9fQVBJX0tFWSIsImpzb24yVmlkZW9VcmwiLCJKU09OMlZJREVPX0FQSV9VUkwiLCJnZW5lcmF0ZUZpbG0iLCJwcm9qZWN0SWQiLCJkYXRhIiwicHJvamVjdCIsImVycm9yIiwicHJvamVjdEVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiRXJyb3IiLCJjaGVja1VzZXJDcmVkaXRzIiwidXNlcl9pZCIsInVwZGF0ZVByb2plY3RTdGF0dXMiLCJzY2VuZXMiLCJnZW5lcmF0ZVNjZW5lcyIsImlkZWEiLCJ2aWRlb1VybHMiLCJnZW5lcmF0ZVNjZW5lVmlkZW9zIiwiZmluYWxWaWRlb1VybCIsImNvbWJpbmVWaWRlb3MiLCJwdWJsaWNVcmwiLCJ1cGxvYWRUb1N0b3JhZ2UiLCJkZWR1Y3RVc2VyQ3JlZGl0cyIsImNvbnNvbGUiLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwidW5kZWZpbmVkIiwicHJvbXB0IiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsImNob2ljZXMiLCJKU09OIiwicGFyc2UiLCJzY2VuZSIsInZpZGVvVXJsIiwiaWQiLCJwdXNoIiwianNvbjJWaWRlb1NwZWMiLCJyZXNvbHV0aW9uIiwicXVhbGl0eSIsIm1hcCIsImluZGV4IiwidHlwZSIsInNyYyIsImR1cmF0aW9uIiwidHJhbnNpdGlvbiIsIm91dHB1dCIsImZvcm1hdCIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJzdHJpbmdpZnkiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwicmVuZGVySWQiLCJwb2xsSnNvbjJWaWRlb1JlbmRlciIsIm1heEF0dGVtcHRzIiwicG9sbEludGVydmFsIiwiYXR0ZW1wdCIsIm91dHB1dF91cmwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ1c2VySWQiLCJ1c2VyQ3JlZGl0cyIsImNyZWF0ZVVzZXJDcmVkaXRzIiwiY3JlZGl0cyIsImN1cnJlbnRDcmVkaXRzIiwiZmV0Y2hFcnJvciIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpbnNlcnQiLCJ2aWRlb1Jlc3BvbnNlIiwidmlkZW9CdWZmZXIiLCJhcnJheUJ1ZmZlciIsInZpZGVvQmxvYiIsIkJsb2IiLCJmaWxlTmFtZSIsInN0b3JhZ2UiLCJ1cGxvYWQiLCJjb250ZW50VHlwZSIsInVwc2VydCIsImdldFB1YmxpY1VybCIsInByb2dyZXNzIiwiZXJyb3JMb2ciLCJ1cGRhdGVEYXRhIiwidmlkZW9fdXJsIiwiZXJyb3JfbG9nIiwiY3JlYXRlUHJvamVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/workflow/engine.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/node-fetch-native","vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/@clerk","vendor-chunks/@peculiar","vendor-chunks/asn1js","vendor-chunks/whatwg-url","vendor-chunks/webcrypto-core","vendor-chunks/pvtsutils","vendor-chunks/tslib","vendor-chunks/pvutils","vendor-chunks/webidl-conversions","vendor-chunks/cookie","vendor-chunks/deepmerge","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/zod","vendor-chunks/agentkeepalive","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmathe%5CAIShortGenerator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();